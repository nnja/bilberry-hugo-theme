{{ define "main" }}

    {{ if .Site.Params.pinnedPost }}
        {{ range first 1 (where .Data.Pages "URL" .Site.Params.pinnedPost) }}
            {{ partial "article-wrapper" . }}
        {{end}}
    {{end}}

    {{ $paginator := .Paginate (where .Data.Pages "Type" "ne" "page") (index .Site.Params "paginate" | default 7) }}
    {{ range  where .Paginator.Pages "Type" "ne" "page" }}
        {{ if .Params.excludeFromIndex }}
            {{/* Do nothing */}}
        {{ else }}
            {{ partial "article-wrapper" . }}
        {{ end }}
    {{ end }}

    {{ partial "paginator" . }}
{{ end }}
